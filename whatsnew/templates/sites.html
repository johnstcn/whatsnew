{% load app_filters %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="/static/images/favicon.ico">
    <script src="/static/js/jquery.min.js"></script>
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/bootstrap-theme.min.css">
    <script src="/static/js/bootstrap.min.js"></script>
    <script type="text/javascript">
    // Automatically reload on focus
    window.onblur = function() {
        window.onfocus = function() {
            location.reload(true);
        }
    };
    </script>
    <style>
.well h1 {
    margin-left: auto;
    margin-right: auto;
}
.list-group, .container-fluid {
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
}
.tag { 
    float: right;
    margin: 0.1em;
}
.tag a {
    text-decoration: none;
    color: white;
}
.row {
    margin-left: 0.5em;
    margin-right: 0.5em;
}
a.btn {
    margin-left: auto;
    margin-right: auto;
    margin-top: 1em;
    margin-bottom: 1em;
}
li#clear a {
    background: #5bc0de;
    color: #ffffff;
}
li#nsfw a {
    background: #d9534f;
    color: #ffffff;
}
.nope {
    float: right;
    font-color: #d9534f;
}
</style>
</head>
<body>
<div class="container-fluid">
<div class="well text-center">
<h1>FreshComics</h1>
<p>We check webcomics on the hour, every hour.
    <br />
So you don't have to.</p>
</div>
{% if messages %}

<ul class="messages list-group">
    {% for message in messages %}
    <li{% if message.tags %} class="text-center list-group-item list-group-item-{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}

{% if info.personal.items %}
<ul id="personal" class="list-group">
{% for site in info.personal.items %}
{% if site.highlight %}
<li class="list-group-item list-group-item-success">
{% else %}
<li class="list-group-item">
{% endif %}
    <h3>
        <a target="_blank" href="{% url 'redirect_to_update' site_update_id=site.update_id %}">{{ site.name }}</a>
        <span class="nope"><a href="{% url 'unwatch' site_id=site.site_id %}">&#x274c;</a></span>
    </h3>
    {% for tag in site.tags %}
        {% if tag == "nsfw" %}
            <span class="tag label label-danger">{{ tag }}</span>
        {% else %}
            <span class="tag label label-default">
                <a href="{% url 'index' tag=tag nsfw=view.kwargs.nsfw %}">{{ tag }}</a></span>
        {% endif %}
    {% endfor %}
    <small>{{ site.date | custom_natural_date }}</small>
</li>
{% endfor %}
</ul>
{% endif %}
{% if info.generic.items %}
<ul class="list-group">
{% for site in info.generic.items %}
<li class="list-group-item">
    <h3>
        <a target="_blank" href="{% url 'redirect_to_update' site_update_id=site.update_id %}">{{ site.name }}</a>
    </h3>
    {% for tag in site.tags %}
        {% if tag == "nsfw" %}
            <span class="tag label label-danger">{{ tag }}</span>
        {% else %}
            <span class="tag label label-default">
                <a href="{% url 'index' tag=tag nsfw=view.kwargs.nsfw %}">{{ tag }}</a>
            </span>
        {% endif %}
    {% endfor %}
    <small>{{ site.date | custom_natural_date }}</small>
</li>
{% endfor %}
{% if info.generic.more > 0 %}
<li class="list-group-item text-center">
    <h3>&hellip;and {{ info.generic.more }} more</h3>
</li>
{% endif %}
</ul>
<div class="well text-center"><h3>Try some tags!</h3>
{% else %}
<div class="well text-center"><h3>Whoops!</h3><p>Nothing here. Try some tags!</p>
{% endif %}
<ul class="pager">
    {% if info.tags %}
        {% for tag in info.tags %}
            {% if view.kwargs.tag == tag %}
            <li class="disabled"><a href="{% url 'index' tag=tag nsfw=view.kwargs.nsfw %}">{{ tag }}</a></li>
            {% else %}
            <li><a href="{% url 'index' tag=tag nsfw=view.kwargs.nsfw %}">{{ tag }}</a></li>
            {% endif %}
        {% endfor %}
    {% endif %}
</ul>
<ul class="pager">
    <li id="clear" class="previous">
    <a href="{% url 'index' tag='all' nsfw='0' %}">Clear Filters</a></li>
    <li id="nsfw" class="next">
    {% if view.kwargs.nsfw == '1' %}
        <a href="{% url 'index' tag=view.kwargs.tag nsfw=0 %}">Hide NSFW</a>
    {% else %}
        <a href="{% url 'index' tag=view.kwargs.tag nsfw=1 %}">Show NSFW</a>
    {% endif %}
    </li>
</ul>
</div>
</div>
</body>
</html>